{"version":3,"sources":["components/FullPageCalendar/constants.ts","styledMixins/index.ts","components/FullPageCalendar/Component.tsx","components/FullPageCalendar/utils.ts","localStorage/index.ts","contexts/calendarContext/index.ts","components/FullPageCalendar/index.tsx","components/DayCard/Component.tsx","components/DayCard/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["shortWeekDays","baseFlexMixin","css","spaceBetweenFlexMixin","shadow1Mixin","baseOnHoverMixin","fadeInKeyframe","keyframes","drawDays","drawHeaders","Container","styled","div","DaysGrid","ColumnHeader","removeButtonStyled","currentMonthCss","otherMonthCss","DayCard","button","props","isCurrentMonth","Header","YearContainer","ChangeMonthButton","Component","children","onClick","dispatch","type","monthYearString","daysRange","anchorDate","fixedIncomes","nonRecurringIncomes","DayNumberContainer","range","now","next","value","done","totalIncome","get","valueOf","reduce","acc","cur","getUTCDate","key","toISOString","getMonth","getDate","iterator","Symbol","getDaysRange","firstDate","lastDate","date","Date","setDate","getFirstDate","currentDate","dayNumber","getDay","getFullYear","getMondayOfTheWeek","minutesOffset","getTimezoneOffset","getFirstDayOfTheMonth","saveToLocalStorage","localStorage","setItem","JSON","stringify","replacer","Array","isArray","map","replaceValue","Object","fromEntries","entries","__proto__","constructor","name","content","reviver","_","Map","initialDate","initialState","getItem","parse","e","console","error","getFromLocalStorage","selectedDate","CalendarContext","createContext","recalculateFirstAndLastDate","CalendarContextProvider","useReducer","calendarContextReducer","state","createElement","Provider","useCalendarContext","useContext","reducer","obj","p","draft","action","prevDate","nextDate","draftValue","push","set","period","FullPageCalendar","componentProps","Intl","DateTimeFormat","undefined","month","year","format","useComponentProps","validationSchema","yup","integer","min","required","tag","optional","PositionContainer","ContentContainer","Link","a","Row","ActionsRow","Col1","Col2","Input","input","pseudoTooltipMixin","pseudoTooltipArrowMixin","Label","label","StyledForm","Form","Button","TagsContainer","NonRecurringIncomeTag","FixedIncomeTag","Fieldset","fieldset","selectedDateString","initialValues","onSubmit","handleChange","errors","hasErrors","values","some","v","i","monthlyIncomes","data-error-message","onChange","id","defaultChecked","disabled","day","show","Boolean","App","window","location","hostname","match","enableMapSet","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.4c2a7550.chunk.js","sourcesContent":["export const weekDays = ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресение'];\r\nexport const shortWeekDays = ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'];\r\n","import { css, keyframes } from 'styled-components';\r\n\r\nexport const baseFlexMixin = css`\r\n  display: flex;\r\n  align-items: baseline;\r\n`;\r\nexport const spaceEvenlyFlexMixin = css`\r\n  ${baseFlexMixin}\r\n  justify-content: space-evenly;\r\n`;\r\n\r\nexport const spaceBetweenFlexMixin = css`\r\n  ${baseFlexMixin}\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const shadow1Mixin = css`\r\n  box-shadow: -2px -2px 6px 1px #d2d2d2, 2px -2px 6px 1px #d2d2d2;\r\n`;\r\n\r\nexport const baseOnHoverMixin = css`\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const fadeInKeyframe = keyframes`\r\nfrom {\r\n  opacity: 0;\r\n}\r\n`;\r\n","import { ComponentProps } from '.';\r\nimport React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { shortWeekDays } from './constants';\r\nimport { DispatchCalendarAction, NonRecurringIncomes, FixedIncomes } from '../../contexts/calendarContext';\r\nimport { spaceBetweenFlexMixin } from '../../styledMixins';\r\nconst Container = styled.div`\r\n  @media screen and (min-width: 640px) {\r\n    padding: 20px;\r\n  }\r\n`;\r\nconst DaysGrid = styled.div`\r\n  display: grid;\r\n  grid-template-rows: repeat(7, 1fr);\r\n  grid-template-columns: repeat(7, 1fr);\r\n  grid-gap: 4px;\r\n\r\n  @media screen and (min-width: 640px) {\r\n    height: calc(100vmin - 60px - 5vmin);\r\n    grid-gap: 20px;\r\n  }\r\n`;\r\nconst ColumnHeader = styled.div`\r\n  font-size: 5vmin;\r\n  align-self: center;\r\n  color: #d3d3d3;\r\n`;\r\nconst removeButtonStyled = css`\r\n  border: none;\r\n  font: inherit;\r\n  background: none;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\nconst currentMonthCss = css`\r\n  background: #e5f9ff;\r\n  border: solid 1px #d4f2fb30;\r\n  box-shadow: 0px 0px 1px 1px #f1f1f1;\r\n`;\r\nconst otherMonthCss = css`\r\n  background: #d3d3d340;\r\n`;\r\n\r\nconst DayCard = styled.button<{ isCurrentMonth: boolean }>`\r\n  ${removeButtonStyled}\r\n  ${(props) => (props.isCurrentMonth ? currentMonthCss : otherMonthCss)}\r\n  box-shadow: 0px 0px 1px 1px #f1f1f1;\r\n  text-align: end;\r\n  padding: 6px 10px;\r\n  &:hover {\r\n    cursor: pointer;\r\n    box-shadow: 2px 2px 4px 2px #f1f1f1;\r\n  }\r\n\r\n  height: 100%;\r\n  & > div {\r\n    height: 100%;\r\n  }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  ${spaceBetweenFlexMixin}\r\n  font-size: 5vmin;\r\n`;\r\nconst YearContainer = styled.div``;\r\nconst ChangeMonthButton = styled.button`\r\n  ${removeButtonStyled}\r\n`;\r\nexport function Component(props: ComponentProps) {\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <ChangeMonthButton children=\"пред.\" onClick={() => props.dispatch({ type: 'show_prev_month' })} />\r\n        <YearContainer children={props.monthYearString} />\r\n        <ChangeMonthButton children=\"след.\" onClick={() => props.dispatch({ type: 'show_next_month' })} />\r\n      </Header>\r\n      <DaysGrid>\r\n        {[...drawHeaders(shortWeekDays)]}\r\n        {[\r\n          ...drawDays(props.daysRange, props.anchorDate, props.fixedIncomes, props.nonRecurringIncomes, props.dispatch),\r\n        ]}\r\n      </DaysGrid>\r\n    </Container>\r\n  );\r\n}\r\nconst DayNumberContainer = styled.div`\r\n  font-size: 1.5vh;\r\n`;\r\nfunction* drawDays(\r\n  range: Generator<Date>,\r\n  now: Date,\r\n  fixedIncomes: FixedIncomes,\r\n  nonRecurringIncomes: NonRecurringIncomes,\r\n  dispatch: DispatchCalendarAction\r\n) {\r\n  while (true) {\r\n    const { value, done } = range.next();\r\n    if (done) return;\r\n\r\n    const totalIncome =\r\n      (nonRecurringIncomes.get(value.valueOf()) ?? []).reduce((acc, cur) => acc + cur.value, 0) +\r\n      (fixedIncomes.get('monthly')?.get(value.getUTCDate()) ?? []).reduce((acc, cur) => acc + cur.value, 0);\r\n    yield (\r\n      <DayCard\r\n        key={value.toISOString()}\r\n        isCurrentMonth={value.getMonth() === now.getMonth()}\r\n        onClick={() => dispatch({ type: 'select_date', value })}\r\n      >\r\n        <div>\r\n          <DayNumberContainer>{value.getDate()}</DayNumberContainer>\r\n          <div>{totalIncome}</div>\r\n        </div>\r\n      </DayCard>\r\n    );\r\n  }\r\n}\r\n\r\nfunction* drawHeaders(range: Iterable<string>) {\r\n  const iterator = range[Symbol.iterator]();\r\n  while (true) {\r\n    const { value, done } = iterator.next();\r\n    if (done) return;\r\n    yield <ColumnHeader key={value}>{value}</ColumnHeader>;\r\n  }\r\n}\r\n","export function* getDaysRange(firstDate: Date, lastDate: Date) {\r\n  let date: Date = new Date(firstDate);\r\n  yield date;\r\n\r\n  while (date <= lastDate) {\r\n    date = new Date(date);\r\n    date.setDate(date.getDate() + 1);\r\n    yield date;\r\n  }\r\n}\r\n\r\nexport function getFirstDate(currentDate: Date) {\r\n  const firstDayOfTheMonth = getFirstDayOfTheMonth(currentDate);\r\n  return getMondayOfTheWeek(firstDayOfTheMonth);\r\n}\r\n\r\nexport function getLastDate(firstDate: Date) {\r\n  return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate() + 40);\r\n}\r\n\r\nfunction getFirstDayOfTheMonth(date: Date) {\r\n  return new Date(date.getFullYear(), date.getMonth(), 1, ...getZeroLocalHhMmSsMs(date.getTimezoneOffset()));\r\n}\r\n\r\nfunction getMondayOfTheWeek(date: Date) {\r\n  const dayNumber = date.getDay();\r\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate() - dayNumber + 1);\r\n}\r\n\r\nfunction getZeroLocalHhMmSsMs(minutesOffset: number) {\r\n  return [0, 0 + minutesOffset, 0, 0];\r\n}\r\n","export function saveToLocalStorage(key: string, value: object) {\r\n  localStorage.setItem(key, JSON.stringify(value, replacer));\r\n}\r\n\r\nfunction replacer(this: any, key: any, value: any) {\r\n  if (!value || typeof value !== 'object') {\r\n    return value;\r\n  }\r\n\r\n  if (Array.isArray(value)) {\r\n    return value.map(replaceValue);\r\n  }\r\n\r\n  return Object.fromEntries(Object.entries<any>(value).map(([k, v]) => [k, replaceValue(v)]));\r\n}\r\n\r\nfunction replaceValue(value: any) {\r\n  const type = value?.__proto__?.constructor?.name;\r\n  switch (type) {\r\n    case 'Map':\r\n      return { type, content: [...value.entries()] };\r\n    case 'Date':\r\n      return { type, content: value.valueOf() };\r\n    default:\r\n      return value;\r\n  }\r\n}\r\n\r\nexport function getFromLocalStorage(key: string) {\r\n  const value = localStorage.getItem(key);\r\n  if (!value) return null;\r\n  try {\r\n    return JSON.parse(value, reviver);\r\n  } catch (e) {\r\n    console.error(e);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction reviver(this: any, _: string, value: any) {\r\n  switch (value?.type) {\r\n    case 'Map':\r\n      return new Map(value.content);\r\n    case 'Date':\r\n      return new Date(value.content);\r\n    default:\r\n      return value;\r\n  }\r\n}\r\n\r\nexport const localStorageSaverMiddleware = (key: string) => <\r\n  R extends (...args: any[]) => any,\r\n  Params extends any[] = Parameters<R>\r\n>(\r\n  reducer: R\r\n) => (...args: Params): ReturnType<R> => {\r\n  const obj = reducer(...args);\r\n  saveToLocalStorage(key, obj);\r\n  return obj;\r\n};\r\n","import { createContext, useReducer, useContext, PropsWithChildren, createElement, Dispatch } from 'react';\r\nimport { getLastDate, getFirstDate } from '../../components/FullPageCalendar/utils';\r\nimport { Immutable, produce as p } from 'immer';\r\nimport { localStorageSaverMiddleware as lsm, getFromLocalStorage } from '../../localStorage';\r\nconst localStorageKey = 'calendarContext';\r\ntype CalendarState = {\r\n  firstDate: Date;\r\n  lastDate: Date;\r\n  anchorDate: Date;\r\n  selectedDate: Date | null;\r\n  nonRecurringIncomes: Map<number, NonRecurringIncome[]>;\r\n  fixedIncomes: Map<FixedIncome['period'], Map<number, FixedIncome[]>>;\r\n};\r\ntype CalendarAction =\r\n  | {\r\n      type: 'show_prev_month';\r\n    }\r\n  | { type: 'show_next_month' }\r\n  | { type: 'select_date'; value: Date }\r\n  | { type: 'unselect_date' }\r\n  | { type: 'add_income'; date: Date; value: NonRecurringIncome | FixedIncome };\r\n\r\nexport type NonRecurringIncome = { type: 'nonRecurring'; tag: string; value: number };\r\nexport type FixedIncome = { type: 'fixed'; tag: string; value: number; period: 'monthly' };\r\n\r\nexport const incomeTypes = ['fixed', 'nonRecurring'] as const;\r\nexport type IncomeTypes = typeof incomeTypes[number];\r\n\r\nexport type NonRecurringIncomes = Immutable<CalendarState>['nonRecurringIncomes'];\r\nexport type FixedIncomes = Immutable<CalendarState>['fixedIncomes'];\r\n\r\nconst initialDate = new Date();\r\nconst initialState: CalendarState = getFromLocalStorage(localStorageKey) ?? {\r\n  anchorDate: initialDate,\r\n  firstDate: initialDate,\r\n  lastDate: initialDate,\r\n  selectedDate: null,\r\n  nonRecurringIncomes: new Map(),\r\n  fixedIncomes: new Map(),\r\n};\r\nexport type DispatchCalendarAction = Dispatch<CalendarAction>;\r\nconst CalendarContext = createContext<[Immutable<CalendarState>, DispatchCalendarAction]>([\r\n  recalculateFirstAndLastDate(initialState),\r\n  () => {},\r\n]);\r\n\r\nexport function CalendarContextProvider({ children }: PropsWithChildren<{}>) {\r\n  const [state, dispatch] = useReducer(\r\n    calendarContextReducer,\r\n    recalculateFirstAndLastDate(initialState),\r\n    recalculateFirstAndLastDate\r\n  );\r\n  return createElement(CalendarContext.Provider, { children, value: [state, dispatch] });\r\n}\r\n\r\nexport function useCalendarContext() {\r\n  return useContext(CalendarContext);\r\n}\r\n\r\nconst calendarContextReducer = lsm(localStorageKey)(\r\n  p((draft: CalendarState, action: CalendarAction) => {\r\n    switch (action.type) {\r\n      case 'show_prev_month': {\r\n        const prevDate = new Date(draft.firstDate);\r\n        prevDate.setDate(prevDate.getDate() - 1);\r\n        draft.anchorDate = prevDate;\r\n        return recalculateFirstAndLastDate(draft);\r\n      }\r\n      case 'show_next_month': {\r\n        const nextDate = new Date(draft.lastDate);\r\n        nextDate.setDate(nextDate.getDate() + 1);\r\n        draft.anchorDate = nextDate;\r\n        return recalculateFirstAndLastDate(draft);\r\n      }\r\n      case 'select_date': {\r\n        draft.selectedDate = action.value;\r\n        break;\r\n      }\r\n      case 'unselect_date': {\r\n        draft.selectedDate = null;\r\n        break;\r\n      }\r\n      case 'add_income': {\r\n        switch (action.value.type) {\r\n          case 'nonRecurring': {\r\n            const key = action.date.valueOf();\r\n            const draftValue = draft.nonRecurringIncomes.get(key);\r\n            if (draftValue) {\r\n              draftValue.push(action.value);\r\n            } else {\r\n              draft.nonRecurringIncomes.set(key, [action.value]);\r\n            }\r\n            break;\r\n          }\r\n          case 'fixed': {\r\n            switch (action.value.period) {\r\n              case 'monthly': {\r\n                const key = action.date.getUTCDate();\r\n                const draftValue = draft.fixedIncomes.get('monthly')?.get(key);\r\n                if (draftValue) {\r\n                  draftValue.push(action.value);\r\n                } else {\r\n                  draft.fixedIncomes.set('monthly', new Map([[key, [action.value]]]));\r\n                }\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return draft;\r\n  })\r\n);\r\n\r\nfunction recalculateFirstAndLastDate(state: CalendarState): CalendarState {\r\n  state.firstDate = getFirstDate(state.anchorDate);\r\n  state.lastDate = getLastDate(state.firstDate);\r\n\r\n  return state;\r\n}\r\n","import React from 'react';\r\nimport { Component } from './Component';\r\nimport { getDaysRange } from './utils';\r\nimport { useCalendarContext } from '../../contexts/calendarContext';\r\n\r\ntype Props = {};\r\n\r\nexport function FullPageCalendar(props: Props) {\r\n  const componentProps = useComponentProps();\r\n\r\n  return <Component {...componentProps} />;\r\n}\r\n\r\nfunction useComponentProps() {\r\n  const [{ anchorDate, firstDate, lastDate, nonRecurringIncomes, fixedIncomes }, dispatch] = useCalendarContext();\r\n  const daysRange = getDaysRange(firstDate, lastDate);\r\n  const monthYearString = new Intl.DateTimeFormat(undefined, { month: 'short', year: 'numeric' }).format(anchorDate);\r\n  return {\r\n    nonRecurringIncomes,\r\n    fixedIncomes,\r\n    daysRange,\r\n    anchorDate,\r\n    monthYearString,\r\n    dispatch,\r\n  };\r\n}\r\n\r\nexport type ComponentProps = ReturnType<typeof useComponentProps>;\r\n","import { ComponentProps } from '.';\r\nimport React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\nimport {\r\n  baseOnHoverMixin,\r\n  baseFlexMixin,\r\n  spaceBetweenFlexMixin,\r\n  shadow1Mixin,\r\n  fadeInKeyframe,\r\n} from '../../styledMixins';\r\nimport { NonRecurringIncome, FixedIncome } from '../../contexts/calendarContext';\r\n\r\nconst validationSchema = yup.object({\r\n  value: yup.number().integer().min(1).required(),\r\n  type: yup.string().required(),\r\n  tag: yup.string().optional(),\r\n});\r\nconst PositionContainer = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: inherit;\r\n  width: inherit;\r\n  background: #fff;\r\n  min-height: 50vh;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  ${shadow1Mixin}\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\n  margin: 10px 30px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  ${spaceBetweenFlexMixin}\r\n`;\r\nconst Link = styled.a`\r\n  ${baseOnHoverMixin}\r\n`;\r\nconst Row = styled.div`\r\n  margin: 8px 0;\r\n  ${spaceBetweenFlexMixin}\r\n`;\r\nconst ActionsRow = styled.div`\r\n  ${baseFlexMixin};\r\n  flex-direction: row-reverse;\r\n`;\r\nconst Col1 = styled.div``;\r\nconst Col2 = styled.div`\r\n  flex-basis: 70%;\r\n  flex-grow: 0;\r\n`;\r\nconst Input = styled.input``;\r\n\r\nconst pseudoTooltipMixin = css`\r\n  content: attr(data-error-message);\r\n  display: inline-block;\r\n  position: absolute;\r\n  transform: translate(0, -106%);\r\n  background: #ff0000;\r\n  padding: 4px 8px;\r\n  animation: ${fadeInKeyframe} 300ms;\r\n  border-radius: 2px;\r\n  color: #ffe0e0;\r\n  font-weight: 400;\r\n  max-width: 50vw;\r\n  opacity: 0.8;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`;\r\nconst pseudoTooltipArrowMixin = css`\r\n  content: '';\r\n  background: none;\r\n  border-radius: unset;\r\n  width: 0;\r\n  height: 0;\r\n  border: solid 4px transparent;\r\n  border-top: solid 4px #ff0000;\r\n  display: inline-block;\r\n  position: absolute;\r\n  transform: translate(-145px, -22%);\r\n  animation: ${fadeInKeyframe} 300ms;\r\n  opacity: 0.8;\r\n`;\r\nconst Label = styled.label`\r\n  &[data-error-message]:after {\r\n    content: '!';\r\n    position: absolute;\r\n    background: #ff0000;\r\n    color: #ffe0e0;\r\n    border-radius: 50%;\r\n    width: 1em;\r\n    height: 1em;\r\n    text-align: center;\r\n    line-height: 1;\r\n    transform: translate(-20px, 4px);\r\n    font-weight: 500;\r\n  }\r\n  &:focus-within,\r\n  &:hover {\r\n    &[data-error-message]:before {\r\n      ${pseudoTooltipMixin};\r\n    }\r\n    &[data-error-message]:after {\r\n      ${pseudoTooltipArrowMixin}\r\n      overflow: unset;\r\n      white-space: unset;\r\n      text-overflow: unset;\r\n    }\r\n  }\r\n`;\r\nconst StyledForm = styled(Form)`\r\n  margin: 10px auto;\r\n`;\r\nconst Button = styled.button``;\r\nconst TagsContainer = styled.div`\r\n  ${baseFlexMixin}\r\n  flex-wrap: wrap;\r\n\r\n  & > * {\r\n    margin: 5px 0;\r\n    margin-right: 10px;\r\n  }\r\n`;\r\nconst NonRecurringIncomeTag = styled.div`\r\n  padding: 2px;\r\n  font-weight: 500;\r\n  border: solid 2px #52db24;\r\n  background: #52db2490;\r\n  border-radius: 4px;\r\n  color: #2c7513;\r\n`;\r\n\r\nconst FixedIncomeTag = styled.div`\r\n  padding: 2px;\r\n  font-weight: 500;\r\n  border: solid 2px #24db87;\r\n  background: #24db8790;\r\n  border-radius: 4px;\r\n  color: #115f3b;\r\n`;\r\nconst Fieldset = styled.fieldset`\r\n  padding: 0;\r\n  margin: 0;\r\n  border: none;\r\n`;\r\nexport function Component(props: ComponentProps) {\r\n  return (\r\n    <PositionContainer>\r\n      <ContentContainer>\r\n        <Header>\r\n          <h1>{props.selectedDateString}</h1>\r\n          <Link children=\"Закрыть\" onClick={() => props.dispatch({ type: 'unselect_date' })} />\r\n        </Header>\r\n        <Formik<NonRecurringIncome | FixedIncome>\r\n          validationSchema={validationSchema}\r\n          initialValues={{ tag: '', value: 0, type: 'fixed', period: 'monthly' }}\r\n          onSubmit={(value) => props.dispatch({ type: 'add_income', date: props.selectedDate, value })}\r\n        >\r\n          {({ handleChange, errors }) => {\r\n            const hasErrors = Object.values(errors).some((v) => v != null);\r\n            return (\r\n              <StyledForm>\r\n                {!!props.nonRecurringIncomes && (\r\n                  <TagsContainer>\r\n                    {props.nonRecurringIncomes.map(({ tag, value }, i) => (\r\n                      <NonRecurringIncomeTag key={i} children={`${tag || 'Без категории'}: ${value}`} />\r\n                    ))}\r\n                  </TagsContainer>\r\n                )}\r\n                {!!props.monthlyIncomes && (\r\n                  <TagsContainer>\r\n                    {props.monthlyIncomes.map(({ tag, value }, i) => (\r\n                      <FixedIncomeTag key={i} children={`${tag || 'Без категории'}: ${value}`} />\r\n                    ))}\r\n                  </TagsContainer>\r\n                )}\r\n                <Row>\r\n                  <Col1>Доход</Col1>\r\n                  <Col2>\r\n                    <Label data-error-message={errors.value}>\r\n                      <Input name=\"value\" type=\"number\" onChange={handleChange} />\r\n                    </Label>\r\n                  </Col2>\r\n                </Row>\r\n                <Row>\r\n                  <Col1>Тип</Col1>\r\n                  <Col2>\r\n                    <Fieldset id=\"type\" onChange={handleChange}>\r\n                      <label>\r\n                        <input type=\"radio\" name=\"type\" value=\"fixed\" defaultChecked={true} />\r\n                        Постоянный\r\n                      </label>\r\n                      <label>\r\n                        <input type=\"radio\" name=\"type\" value=\"nonRecurring\" />\r\n                        Разовый\r\n                      </label>\r\n                    </Fieldset>\r\n                  </Col2>\r\n                </Row>\r\n                <Row>\r\n                  <Col1>Категория</Col1>\r\n                  <Col2>\r\n                    <Label data-error-message={errors.tag}>\r\n                      <Input name=\"tag\" type=\"text\" onChange={handleChange} />\r\n                    </Label>\r\n                  </Col2>\r\n                </Row>\r\n                <ActionsRow>\r\n                  <Col2>\r\n                    <Button type=\"submit\" children=\"Добавить\" disabled={hasErrors} />\r\n                  </Col2>\r\n                </ActionsRow>\r\n              </StyledForm>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </ContentContainer>\r\n    </PositionContainer>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Component } from './Component';\r\nimport { useCalendarContext } from '../../contexts/calendarContext';\r\n\r\ntype Props = {};\r\n\r\nexport function DayCard(props: Props) {\r\n  const componentProps = useComponentProps();\r\n\r\n  if (!componentProps.show) return null;\r\n  return <Component {...componentProps} />;\r\n}\r\n\r\nfunction useComponentProps() {\r\n  const [{ selectedDate, nonRecurringIncomes, fixedIncomes }, dispatch] = useCalendarContext();\r\n  const selectedDateString = selectedDate\r\n    ? new Intl.DateTimeFormat(undefined, { month: 'short', year: 'numeric', day: '2-digit' }).format(selectedDate)\r\n    : null;\r\n  return {\r\n    selectedDate: selectedDate!,\r\n    nonRecurringIncomes: selectedDate ? nonRecurringIncomes.get(selectedDate.valueOf()) : [],\r\n    monthlyIncomes: selectedDate ? fixedIncomes.get('monthly')?.get(selectedDate.getUTCDate()) : [],\r\n    selectedDateString,\r\n    dispatch,\r\n    show: Boolean(selectedDate),\r\n  };\r\n}\r\n\r\nexport type ComponentProps = ReturnType<typeof useComponentProps>;\r\n","import React from 'react';\nimport { FullPageCalendar } from './components/FullPageCalendar';\nimport { CalendarContextProvider } from './contexts/calendarContext';\nimport { DayCard } from './components/DayCard';\nimport styled from 'styled-components';\nimport { shadow1Mixin } from './styledMixins';\n\nconst Container = styled.div`\n  margin: 0 auto;\n  background: ghostwhite;\n  ${shadow1Mixin}\n  width: min-content;\n  font-weight: 300;\n  width: calc(100vmin - 4px);\n  @media screen and (min-width: 640px) {\n    width: calc(100vmin - 40px);\n  }\n\n  h1 {\n    margin: 6px 0;\n    font-weight: 300;\n    font-size: 24px;\n  }\n`;\n\nfunction App() {\n  return (\n    <CalendarContextProvider>\n      <Container>\n        <FullPageCalendar />\n        <DayCard />\n      </Container>\n    </CalendarContextProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { enableMapSet } from 'immer';\n\nenableMapSet();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}